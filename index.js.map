{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["/**\n * PROJECT: Mentix-Botz.blog\n * DESCRIPTION: Full interactivity script including GSAP, Lenis, Mobile Menu & Form Logic.\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 1. ИНИЦИАЛИЗАЦИЯ ИКОНОК ---\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n\n    // --- 2. ПЛАВНЫЙ СКРОЛЛ (LENIS) ---\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // --- 3. МОБИЛЬНОЕ МЕНЮ (ИСПРАВЛЕНО) ---\n    const burger = document.getElementById('burger');\n    const mobileMenu = document.getElementById('mobile-menu');\n    const mobileLinks = document.querySelectorAll('.mobile-nav__link');\n    const body = document.body;\n\n    if (burger && mobileMenu) {\n        const toggleMenu = () => {\n            burger.classList.toggle('active');\n            mobileMenu.classList.toggle('active');\n            body.classList.toggle('no-scroll');\n        };\n\n        burger.addEventListener('click', (e) => {\n            e.stopPropagation();\n            toggleMenu();\n        });\n\n        // Закрытие при клике по ссылке\n        mobileLinks.forEach(link => {\n            link.addEventListener('click', () => {\n                if (mobileMenu.classList.contains('active')) {\n                    toggleMenu();\n                }\n            });\n        });\n\n        // Закрытие меню при клике вне его области\n        document.addEventListener('click', (e) => {\n            if (mobileMenu.classList.contains('active') && !mobileMenu.contains(e.target) && e.target !== burger) {\n                toggleMenu();\n            }\n        });\n    }\n\n    // --- 4. ЭФФЕКТЫ ХЕДЕРА ---\n    const header = document.querySelector('.header');\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 50) {\n            header.classList.add('scrolled');\n        } else {\n            header.classList.remove('scrolled');\n        }\n    });\n\n    // --- 5. АНИМАЦИИ GSAP ---\n    if (typeof gsap !== 'undefined') {\n        gsap.registerPlugin(ScrollTrigger);\n\n        // Посимвольная анимация заголовка (SplitType)\n        const heroTitleText = document.querySelector('#hero-title');\n        if (heroTitleText) {\n            const split = new SplitType(heroTitleText, { types: 'chars' });\n            gsap.from(split.chars, {\n                opacity: 0,\n                y: 50,\n                rotateX: -45,\n                stagger: 0.02,\n                duration: 1,\n                ease: \"power4.out\"\n            });\n        }\n\n        // Плавное появление элементов при скролле\n        const revealElements = document.querySelectorAll('.benefit-card, .blog-card, .section-title, .about__grid');\n        revealElements.forEach(el => {\n            gsap.from(el, {\n                scrollTrigger: {\n                    trigger: el,\n                    start: \"top 85%\",\n                    toggleActions: \"play none none none\"\n                },\n                opacity: 0,\n                y: 30,\n                duration: 1,\n                ease: \"power2.out\"\n            });\n        });\n\n        // Микродвижение фона в Hero\n        document.addEventListener('mousemove', (e) => {\n            const { clientX, clientY } = e;\n            const xPos = (clientX / window.innerWidth - 0.5) * 30;\n            const yPos = (clientY / window.innerHeight - 0.5) * 30;\n            \n            gsap.to('.hero__bg-element', {\n                x: xPos,\n                y: yPos,\n                duration: 2,\n                ease: \"power1.out\"\n            });\n        });\n    }\n\n    // --- 6. ЛОГИКА КОНТАКТНОЙ ФОРМЫ ---\n    const contactForm = document.getElementById('main-form');\n    const phoneInput = document.getElementById('phone-input');\n    const captchaLabel = document.getElementById('captcha-label');\n    const captchaInput = document.getElementById('captcha-input');\n    const successBox = document.getElementById('form-success');\n\n    if (contactForm) {\n        // Генерация капчи\n        let n1 = Math.floor(Math.random() * 10) + 1;\n        let n2 = Math.floor(Math.random() * 5) + 1;\n        let correctAnswer = n1 + n2;\n        \n        if (captchaLabel) {\n            captchaLabel.textContent = `Сколько будет ${n1} + ${n2}?`;\n        }\n\n        // Валидация телефона (только цифры и +)\n        phoneInput?.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/[^0-9+]/g, '');\n        });\n\n        contactForm.addEventListener('submit', (e) => {\n            e.preventDefault();\n\n            // Проверка капчи\n            if (parseInt(captchaInput.value) !== correctAnswer) {\n                captchaInput.style.borderColor = '#ff4b4b';\n                alert('Пожалуйста, решите математический пример правильно.');\n                return;\n            }\n\n            const submitBtn = contactForm.querySelector('button[type=\"submit\"]');\n            submitBtn.disabled = true;\n            submitBtn.textContent = 'Отправка...';\n\n            // Имитация отправки (AJAX)\n            setTimeout(() => {\n                contactForm.style.opacity = '0';\n                contactForm.style.pointerEvents = 'none';\n                \n                if (successBox) {\n                    successBox.classList.add('active');\n                    // Скролл к сообщению об успехе\n                    lenis.scrollTo('#contact', { offset: -100 });\n                }\n            }, 1500);\n        });\n    }\n\n    // --- 7. ПЛАВНЫЙ ПЕРЕХОД ПО ЯКОРЯМ ---\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n        anchor.addEventListener('click', function (e) {\n            e.preventDefault();\n            const targetId = this.getAttribute('href');\n            if (targetId === '#') return;\n            \n            lenis.scrollTo(targetId, {\n                offset: -80,\n                duration: 1.5\n            });\n        });\n    });\n\n    // Кнопка консультации в Hero\n    const heroCta = document.querySelector('.scroll-to-contact');\n    if (heroCta) {\n        heroCta.addEventListener('click', () => {\n            lenis.scrollTo('#contact', { offset: -50 });\n        });\n    }\n});"],"names":["lenis","raf","time","burger","mobileMenu","mobileLinks","body","toggleMenu","e","link","header","heroTitleText","split","el","clientX","clientY","xPos","yPos","contactForm","phoneInput","captchaLabel","captchaInput","successBox","n1","n2","correctAnswer","submitBtn","anchor","targetId","heroCta"],"mappings":"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"}